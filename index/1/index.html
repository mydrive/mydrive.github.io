<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title></title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="author" content="MyDrive Solutions">

    <!-- Le HTML5 shim, for IE6-8 support of HTML elements -->
    <!--[if lt IE 9]>
      <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

    <!-- Le styles -->
<link href='/assets/stylesheets/bootstrap.min-88238289010db19359d2181e634e95cd.css' type='text/css' rel='stylesheet' media='all'>
<link href='/assets/stylesheets/style-e81fa375b231bedf6cb2dbc6653570cc.css' type='text/css' rel='stylesheet' media='all'>
<link href='/assets/stylesheets/google_prettify/sons-of-obsidian-afb0925bfa2d994f17dab93e13fbf999.css' type='text/css' rel='stylesheet' media='all'>
    <!-- Le fav and touch icons -->
  <!-- Update these with your own images
    <link rel="apple-touch-icon" href="images/apple-touch-icon.png">
    <link rel="apple-touch-icon" sizes="72x72" href="images/apple-touch-icon-72x72.png">
    <link rel="apple-touch-icon" sizes="114x114" href="images/apple-touch-icon-114x114.png">
  -->
  <link rel="shortcut icon" href="/assets/media/favicon.ico">
  </head>

  <body>

    <div class="navbar">
      <div class="navbar-inner">
        <div class="container-narrow">
          <a class="brand" href="/">MyDrive Engineering</a>
          <ul class="nav">
              
                <li><a href="/archive">Archive</a></li>
              
              
                <li><a href="/tags">Tags</a></li>
              
              
                <li><a href="/categories">Categories</a></li>
              
          </ul>
        </div>
      </div>
    </div>

    <div class="container-narrow">

      <div class="content">
        <div class="row-fluid">
  <div class="span12">
      <div class="_root">
        <h3 class="title"><a href="/archive">Archive</a> <span class="date"></span></h3>

        <div class="summary ellipsis">
  <h2>2016</h2>
    <h3>January</h3>
    <ul>
      <li>
<span>2016-01-22</span> » <a href="/posts/cassandra_nodes_replacement">Cassandra instantaneous in place node replacement</a>
</li>
    </ul>
  <h2>2015</h2>
    <h3>October</h3>
    <ul>
      <li>
<span>2015-10-27</span> » <a href="/posts/cassandra_summit_2015">Notes on Cassandra Summit 2015</a>
</li>
      <li>
<span>2015-10-26</span> » <a href="/posts/docker_at_accu_2015">Docker at ACCU 2015</a>
</li>
      <li>
<span>2015-10-23</span> » <a href="/posts/ds_stack_setup">Fitting IPython Notebooks, Spark and Cassandra all together</a>
</li>
    </ul>
    <h3>June</h3>
    <ul>
      <li>
<span>2015-06-11</span> » <a href="/posts/job_descriptions">Voting on Job Descriptions</a>
</li>
    </ul>
    <h3>May</h3>
    <ul>
      <li>
<span>2015-05-14</span> » <a href="/posts/cassandra_models_benchmarking">Benchmarking Cassandra models</a>
</li>
    </ul>
</div>

        <div class="more">
          <a href="/archive" class="btn btn-small">read more..</a>
        </div>
      </div>
      <div class="_root">
        <h3 class="title"><a href="/categories">Categories</a> <span class="date"></span></h3>

        <div class="summary ellipsis">
<ul class="tag_box inline">
  <li>
    <a href="/categories#development-ref">development <span>10</span></a>
  </li>
  <li>
    <a href="/categories#programming-ref">programming <span>5</span></a>
  </li>
  <li>
    <a href="/categories#mentoring-ref">mentoring <span>1</span></a>
  </li>
  <li>
    <a href="/categories#operations-ref">operations <span>2</span></a>
  </li>
  <li>
    <a href="/categories#aws-ref">aws <span>1</span></a>
  </li>
  <li>
    <a href="/categories#devops-ref">devops <span>4</span></a>
  </li>
  <li>
    <a href="/categories#training-ref">training <span>1</span></a>
  </li>
  <li>
    <a href="/categories#profiling-ref">profiling <span>2</span></a>
  </li>
  <li>
    <a href="/categories#data%20modelling-ref">data modelling <span>1</span></a>
  </li>
  <li>
    <a href="/categories#conferences-ref">conferences <span>1</span></a>
  </li>
  <li>
    <a href="/categories#talks-ref">talks <span>1</span></a>
  </li>
  <li>
    <a href="/categories#security-ref">security <span>4</span></a>
  </li>
  <li>
    <a href="/categories#continuous%20improvement-ref">continuous improvement <span>1</span></a>
  </li>
  <li>
    <a href="/categories#kanban-ref">kanban <span>1</span></a>
  </li>
</ul>
</div>

        <div class="more">
          <a href="/categories" class="btn btn-small">read more..</a>
        </div>
      </div>
      <div class="_root">
        <h3 class="title"><a href="/">MyDrive Engineering</a> <span class="date"></span></h3>

        <div class="summary ellipsis">
<p>At some point everyone using Cassandra faces the situation of having to replace nodes.
Either because the cluster needs to scale and some nodes are too small or because a node has failed or because your virtualisation provider is going to remove it.</p>

<p>Whichever the reason the situation we face is that a new node has to be streamed in, to hold the <strong>exact same data</strong> the old one had. Why do we need to wait for a whole streaming process, with the network and CPU overhead this requires when we could just copy the data into the new node and have it join the ring replacing the old one?</p>

<p>That's what we, at <a href="https://twitter.com/_mydrive">MyDrive</a> have been doing for a while and we want to share the exact process we follow with the community shall it help someone.</p>

<h3 id="toc_0">Summary</h3>

<p>They main idea behind this process is to have the replacement node up and running as quick as possible by cutting down the process where it takes longer, streaming data.</p>

<p>The key points of the process are:</p>

<ol>
<li>Data will be copied from the old node to the new one using an external volume instead of transmitting it through the network.</li>
<li>The new node will also receive the schema, so that it opens all tables before accepting any query.</li>
<li>The new node will be given the tokens by configuration, so the replacement will be responsible for the exact same data of the node being replaced, and as it already holds the data, no bootstrap process is required.</li>
</ol>

<p>All our infrastructure is in AWS, therefore, we used EBS volumes to backup and restore cassandra data. You may use a different data transfer method which suits you better in your infrastructure.</p>

</div>

        <div class="more">
          <a href="/" class="btn btn-small">read more..</a>
        </div>
      </div>
      <div class="_root">
        <h3 class="title"><a href="/pages">Pages</a> <span class="date"></span></h3>

        <div class="summary">
<ul>
  
    <li><a href="/archive">Archive</a></li>
  
  
    <li><a href="/categories">Categories</a></li>
  
  
    <li><a href="/">MyDrive Engineering</a></li>
  
    <li class="active"><a href="/pages" class="active">Pages</a></li>
  
  
  
    <li><a href="/tags">Tags</a></li>
  
</ul>
</div>

        <div class="more">
          <a href="/pages" class="btn btn-small">read more..</a>
        </div>
      </div>
      <div class="_root">
        <h3 class="title"><a href="/tags">Tags</a> <span class="date"></span></h3>

        <div class="summary ellipsis">
<ul class="tag_box inline">
  <li>
    <a href="/tags#Ruby-ref">Ruby <span>3</span></a>
  </li>
  <li>
    <a href="/tags#Rails-ref">Rails <span>1</span></a>
  </li>
  <li>
    <a href="/tags#Python-ref">Python <span>1</span></a>
  </li>
  <li>
    <a href="/tags#Mentoring-ref">Mentoring <span>1</span></a>
  </li>
  <li>
    <a href="/tags#Africa-ref">Africa <span>1</span></a>
  </li>
  <li>
    <a href="/tags#Pair%20programming-ref">Pair programming <span>1</span></a>
  </li>
  <li>
    <a href="/tags#AWS-ref">AWS <span>1</span></a>
  </li>
  <li>
    <a href="/tags#Amazon-ref">Amazon <span>1</span></a>
  </li>
  <li>
    <a href="/tags#Cloud-ref">Cloud <span>1</span></a>
  </li>
  <li>
    <a href="/tags#RDS-ref">RDS <span>1</span></a>
  </li>
  <li>
    <a href="/tags#Conferences-ref">Conferences <span>1</span></a>
  </li>
  <li>
    <a href="/tags#BathRuby-ref">BathRuby <span>1</span></a>
  </li>
  <li>
    <a href="/tags#Cassandra-ref">Cassandra <span>5</span></a>
  </li>
  <li>
    <a href="/tags#Performance-ref">Performance <span>2</span></a>
  </li>
  <li>
    <a href="/tags#DataModelling-ref">DataModelling <span>1</span></a>
  </li>
  <li>
    <a href="/tags#Benchmarking-ref">Benchmarking <span>1</span></a>
  </li>
  <li>
    <a href="/tags#Operations-ref">Operations <span>1</span></a>
  </li>
  <li>
    <a href="/tags#Node%20replacement-ref">Node replacement <span>1</span></a>
  </li>
  <li>
    <a href="/tags#NoSQL-ref">NoSQL <span>1</span></a>
  </li>
  <li>
    <a href="/tags#DataStax-ref">DataStax <span>1</span></a>
  </li>
  <li>
    <a href="/tags#devops-ref">devops <span>1</span></a>
  </li>
  <li>
    <a href="/tags#docker-ref">docker <span>1</span></a>
  </li>
  <li>
    <a href="/tags#Spark-ref">Spark <span>1</span></a>
  </li>
  <li>
    <a href="/tags#DataStax%20Enterprise-ref">DataStax Enterprise <span>1</span></a>
  </li>
  <li>
    <a href="/tags#IPython%20Notebooks-ref">IPython Notebooks <span>1</span></a>
  </li>
  <li>
    <a href="/tags#IPython-ref">IPython <span>1</span></a>
  </li>
  <li>
    <a href="/tags#security-ref">security <span>4</span></a>
  </li>
  <li>
    <a href="/tags#ghost-ref">ghost <span>1</span></a>
  </li>
  <li>
    <a href="/tags#recruitment-ref">recruitment <span>1</span></a>
  </li>
  <li>
    <a href="/tags#sweets-ref">sweets <span>1</span></a>
  </li>
  <li>
    <a href="/tags#kanban-ref">kanban <span>1</span></a>
  </li>
  <li>
    <a href="/tags#flow-ref">flow <span>1</span></a>
  </li>
  <li>
    <a href="/tags#task%20switching-ref">task switching <span>1</span></a>
  </li>
  <li>
    <a href="/tags#team%20work-ref">team work <span>1</span></a>
  </li>
  <li>
    <a href="/tags#ops-ref">ops <span>3</span></a>
  </li>
  <li>
    <a href="/tags#ruby-ref">ruby <span>1</span></a>
  </li>
  <li>
    <a href="/tags#rails-ref">rails <span>1</span></a>
  </li>
  <li>
    <a href="/tags#Threading-ref">Threading <span>1</span></a>
  </li>
  <li>
    <a href="/tags#Publish-subscribe-ref">Publish-subscribe <span>1</span></a>
  </li>
  <li>
    <a href="/tags#Messaging-ref">Messaging <span>1</span></a>
  </li>
  <li>
    <a href="/tags#Patterns-ref">Patterns <span>1</span></a>
  </li>
  <li>
    <a href="/tags#Synchronisation-ref">Synchronisation <span>1</span></a>
  </li>
  <li>
    <a href="/tags#POODLE-ref">POODLE <span>1</span></a>
  </li>
  <li>
    <a href="/tags#SSL-ref">SSL <span>1</span></a>
  </li>
  <li>
    <a href="/tags#shellshock-ref">shellshock <span>1</span></a>
  </li>
  <li>
    <a href="/tags#iOS-ref">iOS <span>1</span></a>
  </li>
  <li>
    <a href="/tags#Swift-ref">Swift <span>1</span></a>
  </li>
  <li>
    <a href="/tags#memory%20management-ref">memory management <span>1</span></a>
  </li>
  <li>
    <a href="/tags#data%20collection-ref">data collection <span>1</span></a>
  </li>
</ul>
</div>

        <div class="more">
          <a href="/tags" class="btn btn-small">read more..</a>
        </div>
      </div>
    
    <div class="pagination">
      <ul>
          <li class="active"><a href="/index/1">1</a></li>
      </ul>
    </div>
  </div>
</div>

      </div>

      <hr>
      <div class="footer">
        <p>&copy; <a href="http://mydrivesolutions.com" target="_blank">MyDrive Solutions Limited</a> 2014
          with help from <a href="http://ruhoh.com" target="_blank" title="The Definitive Technical Blogging Framework">ruhoh</a>
          and <a href="http://twitter.github.com/bootstrap/" target="_blank">Twitter Bootstrap</a>
        </p>
      </div>

    </div> <!-- /container -->

    <!-- Google Prettify -->
<script src="http://cdnjs.cloudflare.com/ajax/libs/prettify/188.0.0/prettify.js"></script>
<script>
  var pres = document.getElementsByTagName("pre");
  for (var i=0; i < pres.length; ++i) {
    pres[i].className = "prettyprint linenums";
  }
  prettyPrint();
</script>
<!-- end Google Prettify -->
    <script type="text/javascript">

  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-32835100-1']);
  _gaq.push(['_trackPageview']);
  

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();

</script>


    
  </body>
</html>
